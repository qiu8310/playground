{"version":3,"sources":["webpack:///scripts/2618cc3d44868b73.js","webpack:///./src/ifvisible/index.js"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","process","isHidden","hidden","find","document","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_ifvisible_js__","__WEBPACK_IMPORTED_MODULE_0_ifvisible_js___default","n","video","loaded","readyState","handler","inited","removeEventListener","volume","statusEl","getElementById","a","setIdleDuration","on","e","innerHTML","status","now","play","blur","pause","focus","addEventListener","querySelector","call","exports"],"mappings":"AAAAA,cAAc,IAER,SAAUC,EAAQC,EAAqBC,GAE7C,cAC4B,SAASC,GCiCrC,QAASC,KAEP,GAAIC,IAAU,SAAU,eAAgB,YAAa,YAClDC,KAAK,SAAAD,GAAA,WAAsC,KAArBE,SAASF,IAClC,SAAOA,GAASE,SAASF,GDrCoBG,OAAOC,eAAeR,EAAqB,cAAgBS,OAAO,GAC5F,IAAIC,GAA6CT,EAAoB,GACjEU,EAAqDV,EAAoBW,EAAEF,ECPpGT,GAAQ,GAGN,SAASY,GAOT,QAASC,KACP,MAA4B,KAArBD,EAAME,WAGf,QAASC,KACP,IAAIC,GAAWH,IAIf,MAHAG,IAAS,EACTJ,EAAMK,oBAAoB,iBAAkBF,GAC5CH,EAAMK,oBAAoB,aAAcF,GACjCd,IAGT,QAASA,KACPW,EAAMM,OAAS,EAEf,IAAIC,GAAWd,SAASe,eAAe,SACvCV,GAAAW,EAAUC,gBAAgB,IAC1BZ,EAAAW,EAAUE,GAAG,gBAAiB,SAAAC,GAAA,MAAML,GAASM,UAAYN,EAASM,UAAT,QAA6BD,EAAEE,OAA/B,YAIpDxB,KAAcQ,EAAAW,EAAUM,IAAI,WAAWf,EAAMgB,OAElDlB,EAAAW,EAAUQ,KAAK,iBAAMjB,GAAMkB,UAC3BpB,EAAAW,EAAUU,MAAM,iBAAMnB,GAAMgB,SA9B9B,GAAIZ,IAAS,CACb,IAAIH,IAAU,MAAOZ,IAErBW,GAAMoB,iBAAiB,iBAAkBjB,GACzCH,EAAMoB,iBAAiB,aAAcjB,IA4BpCV,SAAS4B,cAAc,YDuBGC,KAAKnC,EAAqBC,EAAoB,KAIrE,SAAUF,EAAQqC,KAKjB,CACA,CAED,SAAUrC,EAAQqC,EAASnC,GAEjCF,EAAOqC,QAAUnC,EAAoB,MAIlC","file":"scripts/2618cc3d44868b73.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ifvisible_js__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ifvisible_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_ifvisible_js__);\n__webpack_require__(1);\n\n\n!function (video) {\n  var inited = false;\n  if (loaded()) return process();\n\n  video.addEventListener('loadedmetadata', handler);\n  video.addEventListener('loadeddata', handler);\n\n  function loaded() {\n    return video.readyState === 4;\n  }\n\n  function handler() {\n    if (inited || !loaded()) return;\n    inited = true;\n    video.removeEventListener('loadedmetadata', handler);\n    video.removeEventListener('loadeddata', handler);\n    return process();\n  }\n\n  function process() {\n    video.volume = 0.1;\n\n    var statusEl = document.getElementById('status');\n    __WEBPACK_IMPORTED_MODULE_0_ifvisible_js___default.a.setIdleDuration(30);\n    __WEBPACK_IMPORTED_MODULE_0_ifvisible_js___default.a.on('statusChanged', function (e) {\n      return statusEl.innerHTML = statusEl.innerHTML + ('<div>' + e.status + '</div>');\n    });\n\n    // FIXME: ifvisible.now('active') 在初始化情况下永远都是 true（没有考虑打开时就是 hidden 的情况）\n    // FIXME: 浏览器在其它应用程序窗口下面，也会使视频播放\n    if (!isHidden() && __WEBPACK_IMPORTED_MODULE_0_ifvisible_js___default.a.now('active')) video.play();\n\n    __WEBPACK_IMPORTED_MODULE_0_ifvisible_js___default.a.blur(function () {\n      return video.pause();\n    });\n    __WEBPACK_IMPORTED_MODULE_0_ifvisible_js___default.a.focus(function () {\n      return video.play();\n    });\n  }\n}(document.querySelector('video'));\n\nfunction isHidden() {\n  // visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange\n  var hidden = ['hidden', 'webkitHidden', 'mozHidden', 'msHidden'].find(function (hidden) {\n    return typeof document[hidden] !== 'undefined';\n  });\n  return hidden ? document[hidden] : false;\n}\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(3)))\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(0);\n\n\n/***/ })\n],[4]);\n\n\n// WEBPACK FOOTER //\n// scripts/2618cc3d44868b73.js","require('./index.scss')\nimport ifvisible from 'ifvisible.js'\n\n!(function(video) {\n  let inited = false\n  if (loaded()) return process()\n\n  video.addEventListener('loadedmetadata', handler)\n  video.addEventListener('loadeddata', handler)\n\n  function loaded() {\n    return video.readyState === 4\n  }\n\n  function handler() {\n    if (inited || !loaded()) return\n    inited = true\n    video.removeEventListener('loadedmetadata', handler)\n    video.removeEventListener('loadeddata', handler)\n    return process()\n  }\n\n  function process() {\n    video.volume = 0.1\n\n    let statusEl = document.getElementById('status')\n    ifvisible.setIdleDuration(30)\n    ifvisible.on('statusChanged', e => (statusEl.innerHTML = statusEl.innerHTML + `<div>${e.status}</div>`))\n\n    // FIXME: ifvisible.now('active') 在初始化情况下永远都是 true（没有考虑打开时就是 hidden 的情况）\n    // FIXME: 浏览器在其它应用程序窗口下面，也会使视频播放\n    if (!isHidden() && ifvisible.now('active')) video.play()\n\n    ifvisible.blur(() => video.pause())\n    ifvisible.focus(() => video.play())\n  }\n})(document.querySelector('video'))\n\nfunction isHidden() {\n  // visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange\n  let hidden = ['hidden', 'webkitHidden', 'mozHidden', 'msHidden']\n    .find(hidden => typeof document[hidden] !== 'undefined')\n  return hidden ? document[hidden] : false\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ifvisible/index.js"],"sourceRoot":""}